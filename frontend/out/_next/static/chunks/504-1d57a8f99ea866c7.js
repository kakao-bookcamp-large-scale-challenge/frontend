(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{83867:(e,r,a)=>{"use strict";a.d(r,{Q:()=>o,v:()=>d});var t=a(85893),l=a(67294),s=a(11163),i=a(31530),n=a(19182);let o=e=>{let r=r=>{let a=(0,s.useRouter)(),[i,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{n.Z.getCurrentUser()?o(!1):a.replace("/?redirect="+a.asPath)},[a]),i)?null:(0,t.jsx)(e,{...r})},a=e.displayName||e.name||"Component";return r.displayName="WithAuth(".concat(a,")"),r},d=e=>{let r=r=>{let a=(0,s.useRouter)(),[o,d]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async()=>{a.isReady&&(n.Z.getCurrentUser()&&"/"===a.pathname?await a.replace("/chat-rooms"):d(!1))})()},[a,a.isReady]),o)?(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--vapor-color-background)",color:"var(--vapor-color-text-primary)"},children:(0,t.jsx)(i.x,{typography:"body1",children:"Loading..."})}):(0,t.jsx)(e,{...r})},a=e.displayName||e.name||"Component";return r.displayName="WithoutAuth(".concat(a,")"),r}},2026:(e,r,a)=>{"use strict";a.d(r,{U:()=>b}),a(77507);var t=a(67294),l=a(36370),s=a(90512),i=a(64584),n=a(85893),o=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,r,a)=>r in e?o(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,h=(e,r)=>{for(var a in r||(r={}))p.call(r,a)&&y(e,a,r[a]);if(u)for(var a of u(r))m.call(r,a)&&y(e,a,r[a]);return e},v=(e,r)=>d(e,c(r)),g=(e,r)=>{var a={};for(var t in e)p.call(e,t)&&0>r.indexOf(t)&&(a[t]=e[t]);if(null!=e&&u)for(var t of u(e))0>r.indexOf(t)&&m.call(e,t)&&(a[t]=e[t]);return a},x=()=>(e,r)=>r.reduce((e,r)=>{let[a,t]=e;return void 0!==t[r]&&(a[r]=t[r]),delete t[r],[a,t]},[{},h({},e)]),f=(0,i.c)({defaultClassName:"callout__17t9x5h7 callout__17t9x5h0",variantClassNames:{color:{primary:"callout__17t9x5h1",success:"callout__17t9x5h2",warning:"callout__17t9x5h3",danger:"callout__17t9x5h4",hint:"callout__17t9x5h5",contrast:"callout__17t9x5h6"}},defaultVariants:{color:"primary"},compoundVariants:[]}),b=(0,t.forwardRef)((e,r)=>{var{className:a,children:t}=e,i=g(e,["className","children"]);let[o,d]=x()(i,["color"]);return(0,n.jsx)(l.WV.div,v(h({ref:r,className:(0,s.Z)(f(o),a)},d),{children:t}))});b.displayName="Callout"},1539:(e,r,a)=>{"use strict";a.d(r,{Zb:()=>j}),a(93406);var t=a(67294),l=a(36370),s=a(90512),i=a(85893),n=Object.defineProperty,o=Object.defineProperties,d=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,m=(e,r,a)=>r in e?n(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,y=(e,r)=>{for(var a in r||(r={}))u.call(r,a)&&m(e,a,r[a]);if(c)for(var a of c(r))p.call(r,a)&&m(e,a,r[a]);return e},h=(e,r)=>o(e,d(r)),v=(e,r)=>{var a={};for(var t in e)u.call(e,t)&&0>r.indexOf(t)&&(a[t]=e[t]);if(null!=e&&c)for(var t of c(e))0>r.indexOf(t)&&p.call(e,t)&&(a[t]=e[t]);return a},g=(0,t.forwardRef)((e,r)=>{var{className:a,children:t}=e,n=v(e,["className","children"]);return(0,i.jsx)(l.WV.div,h(y({ref:r,className:(0,s.Z)("card__18rs0li0",a)},n),{children:t}))});g.displayName="Card";var x=(0,t.forwardRef)((e,r)=>{var{className:a,children:t}=e,n=v(e,["className","children"]);return(0,i.jsx)(l.WV.div,h(y({ref:r,className:(0,s.Z)("card__18rs0li1",a)},n),{children:t}))});x.displayName="Card.Header";var f=(0,t.forwardRef)((e,r)=>{var{className:a,children:t}=e,n=v(e,["className","children"]);return(0,i.jsx)(l.WV.div,h(y({ref:r,className:(0,s.Z)("card__18rs0li2",a)},n),{children:t}))});f.displayName="Card.Body";var b=(0,t.forwardRef)((e,r)=>{var{className:a,children:t}=e,n=v(e,["className","children"]);return(0,i.jsx)(l.WV.div,h(y({ref:r,className:(0,s.Z)("card__18rs0li3",a)},n),{children:t}))});b.displayName="Card.Footer";var j={Root:g,Header:x,Body:f,Footer:b}},31275:(e,r,a)=>{"use strict";a.d(r,{oi:()=>P}),a(92890);var t=a(67294),l=a(36370),s=a(90512),i=a(64584),n=a(85893),o=Object.defineProperty,d=Object.defineProperties,c=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(e,r,a)=>r in e?o(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,h=(e,r)=>{for(var a in r||(r={}))p.call(r,a)&&y(e,a,r[a]);if(u)for(var a of u(r))m.call(r,a)&&y(e,a,r[a]);return e},v=(e,r)=>d(e,c(r)),g=(e,r)=>{var a={};for(var t in e)p.call(e,t)&&0>r.indexOf(t)&&(a[t]=e[t]);if(null!=e&&u)for(var t of u(e))0>r.indexOf(t)&&m.call(e,t)&&(a[t]=e[t]);return a},x=(e,r)=>"".concat(e," returned `undefined`. Seems you forgot to wrap component within ").concat(r),f=()=>(e,r)=>r.reduce((e,r)=>{let[a,t]=e;return void 0!==t[r]&&(a[r]=t[r]),delete t[r],[a,t]},[{},h({},e)]),b=(0,i.c)({defaultClassName:"interactions__13di4x95 interactions__13di4x91 interactions-scale_normal__13di4x96 interactions__13di4x94 text-input__npu94q5",variantClassNames:{invalid:{true:"text-input-invalid_true__npu94q7"},size:{sm:"text-input-size_sm__npu94q8",md:"text-input-size_md__npu94q9",lg:"text-input-size_lg__npu94qa",xl:"text-input-size_xl__npu94qb"}},defaultVariants:{invalid:!1,size:"md"},compoundVariants:[]}),j=(0,i.c)({defaultClassName:"text-input__npu94q3 text-input__npu94q2",variantClassNames:{visuallyHidden:{true:"visually-hidden__1q7xssa0"}},defaultVariants:{visuallyHidden:!1},compoundVariants:[]}),_=(0,i.c)({defaultClassName:"text-input__npu94q0",variantClassNames:{disabled:{true:"text-input-disabled_true__npu94q1"}},defaultVariants:{disabled:!1},compoundVariants:[]}),[w,N]=function(){let{name:e,strict:r=!0,hookName:a="useContext",providerName:l="Provider",errorMessage:s,defaultValue:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.createContext)(i);return n.displayName=e,[n.Provider,function(){let e=(0,t.useContext)(n);if(!e&&r){let e=Error(null!=s?s:x(a,l));throw e.name="ContextError",e}return e},n]}({name:"TextInput",hookName:"useTextInputContext",providerName:"TextInputProvider"}),C=(0,t.forwardRef)((e,r)=>{var{className:a,children:i}=e,o=g(e,["className","children"]);let d=(0,t.useId)(),[c,u]=f()(o,["type","value","onValueChange","defaultValue","size","disabled","invalid","readOnly","visuallyHidden","placeholder"]),{disabled:p}=c;return(0,n.jsx)(w,{value:h({textInputId:d},c),children:(0,n.jsx)(l.WV.div,v(h({ref:r,className:(0,s.Z)(_({disabled:p}),a)},u),{children:i}))})});C.displayName="TextInput.Root";var O=(0,t.forwardRef)((e,r)=>{var{htmlFor:a,className:t}=e,i=g(e,["htmlFor","className"]);let{textInputId:o=a,visuallyHidden:d}=N();return(0,n.jsx)(l.WV.label,h({ref:r,htmlFor:o,className:(0,s.Z)(j({visuallyHidden:d}),t)},i))});O.displayName="TextInput.Label";var V=(0,t.forwardRef)((e,r)=>{var{id:a,className:t}=e,i=g(e,["id","className"]);let{type:o,textInputId:d=a,value:c,onValueChange:u,defaultValue:p,disabled:m,invalid:y,readOnly:v,size:x,placeholder:f}=N();return(0,n.jsx)(l.WV.input,h({ref:r,id:d,type:o,value:c,onChange:e=>null==u?void 0:u(e.target.value),defaultValue:p,disabled:m,"aria-invalid":y,readOnly:v,placeholder:f,className:(0,s.Z)(b({invalid:y,size:x}),t)},i))});V.displayName="TextInput.Field";var P={Root:C,Label:O,Field:V}},9828:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>y});var t=a(85893),l=a(67294),s=a(11163),i=a(18237),n=a(19182),o=a(83867),d=a(1539),c=a(31530),u=a(2026),p=a(31275),m=a(74303);a(22226);let y=(0,o.v)(()=>{let[e,r]=(0,l.useState)({email:"",password:""}),[a,o]=(0,l.useState)(null),[y,h]=(0,l.useState)(!1),[v,g]=(0,l.useState)({checking:!0,connected:!1}),x=(0,s.useRouter)(),{redirect:f}=x.query;(0,l.useEffect)(()=>{let e=async()=>{try{console.log("Checking server connection..."),await n.Z.checkServerConnection(),console.log("Server connection successful"),g({checking:!1,connected:!0})}catch(e){console.error("Server connection check failed:",e),g({checking:!1,connected:!1}),o({type:"warning",title:"서버 연결 확인 실패",message:"서버와의 연결을 확인할 수 없습니다.",suggestion:"로그인을 시도해보세요. 문제가 지속되면 새로고침해주세요."})}},r=setTimeout(()=>{e()},100),a=setTimeout(()=>{console.log("Server connection check timeout, proceeding anyway"),g(e=>e.checking?{checking:!1,connected:!0}:e)},4e3);return()=>{clearTimeout(r),clearTimeout(a)}},[]);let b=()=>{var r;return(null===(r=e.email)||void 0===r?void 0:r.trim())?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())?!!e.password||(o({type:"warning",title:"입력 오류",message:"비밀번호를 입력해주세요.",field:"password"}),!1):(o({type:"warning",title:"입력 오류",message:"올바른 이메일 형식이 아닙니다.",field:"email"}),!1):(o({type:"warning",title:"입력 오류",message:"이메일을 입력해주세요.",field:"email"}),!1)},j=async r=>{if(r.preventDefault(),o(null),!v.connected){o({type:"error",title:"서버 연결 실패",message:"서버와 연결할 수 없습니다.",suggestion:"인터넷 연결을 확인하고 잠시 후 다시 시도해주세요.",Icon:i.dFN});return}if(b())try{h(!0);let r={email:e.email.trim(),password:e.password};console.log("Submitting login request:",{email:r.email,hasPassword:!!r.password,timestamp:new Date().toISOString()}),await n.Z.login(r);let a=x.query.redirect||"/chat-rooms";x.push(a)}catch(e){var a;console.error("Login error:",e),e.isAxiosError&&(null===(a=e.response)||void 0===a?void 0:a.status)===500?o({type:"error",title:"서버 오류",message:"서버에서 오류가 발생했습니다.",suggestion:"잠시 후 다시 시도해주세요.",Icon:i.oC6}):o({type:"error",title:"로그인 실패",message:e.message||"로그인 처리 중 오류가 발생했습니다.",suggestion:"입력하신 정보를 다시 확인해주세요.",Icon:i.oC6})}finally{h(!1)}};return v.checking?(0,t.jsx)("div",{className:"auth-container",children:(0,t.jsx)(d.Zb.Root,{className:"auth-card",children:(0,t.jsxs)(d.Zb.Body,{className:"card-body",children:[(0,t.jsx)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:(0,t.jsx)("img",{src:"images/logo-h.png",style:{width:"50%"}})}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)(c.x,{typography:"body1",children:"서버 연결 확인 중..."}),(0,t.jsx)("div",{className:"spinner-border text-primary mt-3",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})})}):(0,t.jsx)("div",{className:"auth-container",children:(0,t.jsx)(d.Zb.Root,{className:"auth-card",children:(0,t.jsxs)(d.Zb.Body,{className:"card-body",children:[(0,t.jsx)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:(0,t.jsx)("img",{src:"images/logo-h.png",style:{width:"50%"}})}),a&&(0,t.jsxs)(u.U,{color:"error"===a.type?"danger":"warning"===a.type?"warning":"primary",children:[(0,t.jsx)("strong",{children:a.title}),(0,t.jsx)(c.x,{typography:"body2",children:a.message}),a.suggestion&&(0,t.jsx)("small",{children:a.suggestion})]}),(0,t.jsxs)("form",{onSubmit:j,noValidate:!0,children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)(p.oi.Root,{type:"email",value:e.email,onValueChange:e=>{r(r=>({...r,email:e})),(null==a?void 0:a.field)==="email"&&o(null)},disabled:y,invalid:(null==a?void 0:a.field)==="email",placeholder:"이메일을 입력하세요",children:[(0,t.jsx)(p.oi.Label,{children:"이메일"}),(0,t.jsx)(p.oi.Field,{id:"email",name:"email",autoComplete:"email",required:!0,style:{width:"100%"}})]}),(null==a?void 0:a.field)==="email"&&(0,t.jsx)(c.x,{typography:"body3",color:"danger",children:a.message})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsxs)(p.oi.Root,{type:"password",value:e.password,onValueChange:e=>{r(r=>({...r,password:e})),(null==a?void 0:a.field)==="password"&&o(null)},disabled:y,invalid:(null==a?void 0:a.field)==="password",placeholder:"비밀번호를 입력하세요",children:[(0,t.jsx)(p.oi.Label,{children:"비밀번호"}),(0,t.jsx)(p.oi.Field,{id:"password",name:"password",autoComplete:"current-password",required:!0,style:{width:"100%"}})]}),(null==a?void 0:a.field)==="password"&&(0,t.jsx)(c.x,{typography:"body3",color:"danger",children:a.message})]}),(0,t.jsx)(m.z,{type:"submit",color:"primary",size:"lg",style:{width:"100%",marginTop:"var(--vapor-space-200)"},disabled:y||!v.connected,children:y?"로그인 중...":"로그인"}),(0,t.jsxs)("div",{style:{marginTop:"var(--vapor-space-400)",textAlign:"center"},children:[(0,t.jsx)(c.x,{typography:"body2",style:{display:"block",marginBottom:"var(--vapor-space-200)"},children:"계정이 없으신가요?"}),(0,t.jsx)(m.z,{onClick:()=>x.push("/register"),disabled:y||!v.connected,children:"회원가입"})]})]})]})})})})},77507:()=>{},93406:()=>{},92890:()=>{},82613:()=>{}}]);