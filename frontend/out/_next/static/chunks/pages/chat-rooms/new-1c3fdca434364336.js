(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{48298:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat-rooms/new",function(){return t(53137)}])},2026:(e,r,t)=>{"use strict";t.d(r,{U:()=>b}),t(77507);var a=t(67294),s=t(36370),n=t(90512),o=t(64584),i=t(85893),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,r,t)=>r in e?l(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,m=(e,r)=>{for(var t in r||(r={}))f.call(r,t)&&h(e,t,r[t]);if(u)for(var t of u(r))p.call(r,t)&&h(e,t,r[t]);return e},v=(e,r)=>c(e,d(r)),_=(e,r)=>{var t={};for(var a in e)f.call(e,a)&&0>r.indexOf(a)&&(t[a]=e[a]);if(null!=e&&u)for(var a of u(e))0>r.indexOf(a)&&p.call(e,a)&&(t[a]=e[a]);return t},w=()=>(e,r)=>r.reduce((e,r)=>{let[t,a]=e;return void 0!==a[r]&&(t[r]=a[r]),delete a[r],[t,a]},[{},m({},e)]),x=(0,o.c)({defaultClassName:"callout__17t9x5h7 callout__17t9x5h0",variantClassNames:{color:{primary:"callout__17t9x5h1",success:"callout__17t9x5h2",warning:"callout__17t9x5h3",danger:"callout__17t9x5h4",hint:"callout__17t9x5h5",contrast:"callout__17t9x5h6"}},defaultVariants:{color:"primary"},compoundVariants:[]}),b=(0,a.forwardRef)((e,r)=>{var{className:t,children:a}=e,o=_(e,["className","children"]);let[l,c]=w()(o,["color"]);return(0,i.jsx)(s.WV.div,v(m({ref:r,className:(0,n.Z)(x(l),t)},c),{children:a}))});b.displayName="Callout"},1539:(e,r,t)=>{"use strict";t.d(r,{Zb:()=>y}),t(93406);var a=t(67294),s=t(36370),n=t(90512),o=t(85893),i=Object.defineProperty,l=Object.defineProperties,c=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=(e,r,t)=>r in e?i(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,h=(e,r)=>{for(var t in r||(r={}))u.call(r,t)&&p(e,t,r[t]);if(d)for(var t of d(r))f.call(r,t)&&p(e,t,r[t]);return e},m=(e,r)=>l(e,c(r)),v=(e,r)=>{var t={};for(var a in e)u.call(e,a)&&0>r.indexOf(a)&&(t[a]=e[a]);if(null!=e&&d)for(var a of d(e))0>r.indexOf(a)&&f.call(e,a)&&(t[a]=e[a]);return t},_=(0,a.forwardRef)((e,r)=>{var{className:t,children:a}=e,i=v(e,["className","children"]);return(0,o.jsx)(s.WV.div,m(h({ref:r,className:(0,n.Z)("card__18rs0li0",t)},i),{children:a}))});_.displayName="Card";var w=(0,a.forwardRef)((e,r)=>{var{className:t,children:a}=e,i=v(e,["className","children"]);return(0,o.jsx)(s.WV.div,m(h({ref:r,className:(0,n.Z)("card__18rs0li1",t)},i),{children:a}))});w.displayName="Card.Header";var x=(0,a.forwardRef)((e,r)=>{var{className:t,children:a}=e,i=v(e,["className","children"]);return(0,o.jsx)(s.WV.div,m(h({ref:r,className:(0,n.Z)("card__18rs0li2",t)},i),{children:a}))});x.displayName="Card.Body";var b=(0,a.forwardRef)((e,r)=>{var{className:t,children:a}=e,i=v(e,["className","children"]);return(0,o.jsx)(s.WV.div,m(h({ref:r,className:(0,n.Z)("card__18rs0li3",t)},i),{children:a}))});b.displayName="Card.Footer";var y={Root:_,Header:w,Body:x,Footer:b}},31275:(e,r,t)=>{"use strict";t.d(r,{oi:()=>P}),t(92890);var a=t(67294),s=t(36370),n=t(90512),o=t(64584),i=t(85893),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,h=(e,r,t)=>r in e?l(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,m=(e,r)=>{for(var t in r||(r={}))f.call(r,t)&&h(e,t,r[t]);if(u)for(var t of u(r))p.call(r,t)&&h(e,t,r[t]);return e},v=(e,r)=>c(e,d(r)),_=(e,r)=>{var t={};for(var a in e)f.call(e,a)&&0>r.indexOf(a)&&(t[a]=e[a]);if(null!=e&&u)for(var a of u(e))0>r.indexOf(a)&&p.call(e,a)&&(t[a]=e[a]);return t},w=(e,r)=>"".concat(e," returned `undefined`. Seems you forgot to wrap component within ").concat(r),x=()=>(e,r)=>r.reduce((e,r)=>{let[t,a]=e;return void 0!==a[r]&&(t[r]=a[r]),delete a[r],[t,a]},[{},m({},e)]),b=(0,o.c)({defaultClassName:"interactions__13di4x95 interactions__13di4x91 interactions-scale_normal__13di4x96 interactions__13di4x94 text-input__npu94q5",variantClassNames:{invalid:{true:"text-input-invalid_true__npu94q7"},size:{sm:"text-input-size_sm__npu94q8",md:"text-input-size_md__npu94q9",lg:"text-input-size_lg__npu94qa",xl:"text-input-size_xl__npu94qb"}},defaultVariants:{invalid:!1,size:"md"},compoundVariants:[]}),y=(0,o.c)({defaultClassName:"text-input__npu94q3 text-input__npu94q2",variantClassNames:{visuallyHidden:{true:"visually-hidden__1q7xssa0"}},defaultVariants:{visuallyHidden:!1},compoundVariants:[]}),j=(0,o.c)({defaultClassName:"text-input__npu94q0",variantClassNames:{disabled:{true:"text-input-disabled_true__npu94q1"}},defaultVariants:{disabled:!1},compoundVariants:[]}),[N,k]=function(){let{name:e,strict:r=!0,hookName:t="useContext",providerName:s="Provider",errorMessage:n,defaultValue:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.createContext)(o);return i.displayName=e,[i.Provider,function(){let e=(0,a.useContext)(i);if(!e&&r){let e=Error(null!=n?n:w(t,s));throw e.name="ContextError",e}return e},i]}({name:"TextInput",hookName:"useTextInputContext",providerName:"TextInputProvider"}),g=(0,a.forwardRef)((e,r)=>{var{className:t,children:o}=e,l=_(e,["className","children"]);let c=(0,a.useId)(),[d,u]=x()(l,["type","value","onValueChange","defaultValue","size","disabled","invalid","readOnly","visuallyHidden","placeholder"]),{disabled:f}=d;return(0,i.jsx)(N,{value:m({textInputId:c},d),children:(0,i.jsx)(s.WV.div,v(m({ref:r,className:(0,n.Z)(j({disabled:f}),t)},u),{children:o}))})});g.displayName="TextInput.Root";var C=(0,a.forwardRef)((e,r)=>{var{htmlFor:t,className:a}=e,o=_(e,["htmlFor","className"]);let{textInputId:l=t,visuallyHidden:c}=k();return(0,i.jsx)(s.WV.label,m({ref:r,htmlFor:l,className:(0,n.Z)(y({visuallyHidden:c}),a)},o))});C.displayName="TextInput.Label";var O=(0,a.forwardRef)((e,r)=>{var{id:t,className:a}=e,o=_(e,["id","className"]);let{type:l,textInputId:c=t,value:d,onValueChange:u,defaultValue:f,disabled:p,invalid:h,readOnly:v,size:w,placeholder:x}=k();return(0,i.jsx)(s.WV.input,m({ref:r,id:c,type:l,value:d,onChange:e=>null==u?void 0:u(e.target.value),defaultValue:f,disabled:p,"aria-invalid":h,readOnly:v,placeholder:x,className:(0,n.Z)(b({invalid:h,size:w}),a)},o))});O.displayName="TextInput.Field";var P={Root:g,Label:C,Field:O}},53137:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ee});var a=t(85893),s=t(67294),n=t.t(s,2),o=t(11163),i=t(18237),l=t(1539),c=t(31530),d=t(2026),u=t(31275);t(74007);var f=t(36370),p=t(28771),h=t(25360),m=t(9981),v=n[" useInsertionEffect ".trim().toString()]||m.b,_=(Symbol("RADIX:SYNC_STATE"),"Switch"),[w,x]=(0,h.b)(_),[b,y]=w(_),j=s.forwardRef((e,r)=>{let{__scopeSwitch:t,name:n,checked:o,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...m}=e,[w,x]=s.useState(null),y=(0,p.e)(r,e=>x(e)),j=s.useRef(!1),N=!w||h||!!w.closest("form"),[k,O]=function({prop:e,defaultProp:r,onChange:t=()=>{},caller:a}){let[n,o,i]=function({defaultProp:e,onChange:r}){let[t,a]=s.useState(e),n=s.useRef(t),o=s.useRef(r);return v(()=>{o.current=r},[r]),s.useEffect(()=>{n.current!==t&&(o.current?.(t),n.current=t)},[t,n]),[t,a,o]}({defaultProp:r,onChange:t}),l=void 0!==e,c=l?e:n;{let r=s.useRef(void 0!==e);s.useEffect(()=>{let e=r.current;if(e!==l){let r=l?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e?"controlled":"uncontrolled"} to ${r}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}r.current=l},[l,a])}return[c,s.useCallback(r=>{if(l){let t="function"==typeof r?r(e):r;t!==e&&i.current?.(t)}else o(r)},[l,e,o,i])]}({prop:o,defaultProp:i??!1,onChange:u,caller:_});return(0,a.jsxs)(b,{scope:t,checked:k,disabled:c,children:[(0,a.jsx)(f.WV.button,{type:"button",role:"switch","aria-checked":k,"aria-required":l,"data-state":C(k),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:y,onClick:function(e,r,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e?.(a),!1===t||!a.defaultPrevented)return r?.(a)}}(e.onClick,e=>{O(e=>!e),N&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),N&&(0,a.jsx)(g,{control:w,bubbles:!j.current,name:n,value:d,checked:k,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});j.displayName=_;var N="SwitchThumb",k=s.forwardRef((e,r)=>{let{__scopeSwitch:t,...s}=e,n=y(N,t);return(0,a.jsx)(f.WV.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:r})});k.displayName=N;var g=s.forwardRef(({__scopeSwitch:e,control:r,checked:t,bubbles:n=!0,...o},i)=>{let l=s.useRef(null),c=(0,p.e)(l,i),d=function(e){let r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}(t),u=function(e){let[r,t]=s.useState(void 0);return(0,m.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let a,s;if(!Array.isArray(r)||!r.length)return;let n=r[0];if("borderBoxSize"in n){let e=n.borderBoxSize,r=Array.isArray(e)?e[0]:e;a=r.inlineSize,s=r.blockSize}else a=e.offsetWidth,s=e.offsetHeight;t({width:a,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}(r);return s.useEffect(()=>{let e=l.current;if(!e)return;let r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==t&&r){let a=new Event("click",{bubbles:n});r.call(e,t),e.dispatchEvent(a)}},[d,t,n]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...o,tabIndex:-1,ref:c,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function C(e){return e?"checked":"unchecked"}g.displayName="SwitchBubbleInput";var O=t(90512),P=t(64584),S=Object.defineProperty,R=Object.defineProperties,V=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,Z=(e,r,t)=>r in e?S(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,T=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&Z(e,t,r[t]);if(E)for(var t of E(r))I.call(r,t)&&Z(e,t,r[t]);return e},q=(e,r)=>R(e,V(r)),W=(e,r)=>{var t={};for(var a in e)z.call(e,a)&&0>r.indexOf(a)&&(t[a]=e[a]);if(null!=e&&E)for(var a of E(e))0>r.indexOf(a)&&I.call(e,a)&&(t[a]=e[a]);return t},H=(e,r)=>"".concat(e," returned `undefined`. Seems you forgot to wrap component within ").concat(r),D=()=>(e,r)=>r.reduce((e,r)=>{let[t,a]=e;return void 0!==a[r]&&(t[r]=a[r]),delete a[r],[t,a]},[{},T({},e)]),F=(0,P.c)({defaultClassName:"interactions__13di4x95 interactions__13di4x91 interactions-scale_normal__13di4x96 interactions__13di4x93 switch__1kcrr7k4",variantClassNames:{size:{sm:"switch__1kcrr7k5",md:"switch__1kcrr7k6",lg:"switch__1kcrr7k7"}},defaultVariants:{size:"md"},compoundVariants:[]}),A=(0,P.c)({defaultClassName:"switch__1kcrr7kg switch__1kcrr7kc",variantClassNames:{size:{sm:"switch__1kcrr7kd",md:"switch__1kcrr7ke",lg:"switch__1kcrr7kf"}},defaultVariants:{size:"md"},compoundVariants:[]}),B=(0,P.c)({defaultClassName:"switch__1kcrr7kl switch__1kcrr7kk",variantClassNames:{visuallyHidden:{true:"visually-hidden__1q7xssa0"}},defaultVariants:{visuallyHidden:!1},compoundVariants:[]}),L=(0,P.c)({defaultClassName:"switch__1kcrr7k2 switch__1kcrr7k0",variantClassNames:{disabled:{true:"switch__1kcrr7k1"}},defaultVariants:{disabled:!1},compoundVariants:[]}),[U,X]=function(){let{name:e,strict:r=!0,hookName:t="useContext",providerName:a="Provider",errorMessage:n,defaultValue:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,s.createContext)(o);return i.displayName=e,[i.Provider,function(){let e=(0,s.useContext)(i);if(!e&&r){let e=Error(null!=n?n:H(t,a));throw e.name="ContextError",e}return e},i]}({name:"Switch",hookName:"useSwitch",providerName:"SwitchProvider"}),$=(0,s.forwardRef)((e,r)=>{var{className:t}=e,n=W(e,["className"]);let o=(0,s.useId)(),[i,l]=D()(n,["checked","onCheckedChange","defaultChecked","disabled","size","visuallyHidden"]),{disabled:c}=i;return(0,a.jsx)(U,{value:T({switchId:o},i),children:(0,a.jsx)(f.WV.div,T({ref:r,className:(0,O.Z)(L({disabled:c}),t)},l))})});$.displayName="Switch.Root";var J=(0,s.forwardRef)((e,r)=>{var{htmlFor:t,className:s}=e,n=W(e,["htmlFor","className"]);let{switchId:o,visuallyHidden:i}=X();return(0,a.jsx)(f.WV.label,T({ref:r,htmlFor:t||o,className:(0,O.Z)(B({visuallyHidden:i}),s)},n))});J.displayName="Switch.Label";var M=(0,s.forwardRef)((e,r)=>{var{id:t,className:s}=e,n=W(e,["id","className"]);let{switchId:o,checked:i,onCheckedChange:l,defaultChecked:c,disabled:d,size:u}=X();return(0,a.jsx)(j,q(T({ref:r,id:t||o,checked:i,defaultChecked:c,onCheckedChange:l,disabled:d,className:(0,O.Z)(F({size:u}),s)},n),{children:(0,a.jsx)(k,{className:A({size:u})})}))});M.displayName="Switch.Control";var K={Root:$,Label:J,Control:M},Y=t(74303),G=t(22226),Q=t(19182);let ee=function(){let e=(0,o.useRouter)(),[r,t]=(0,s.useState)({name:"",hasPassword:!1,password:""}),[n,f]=(0,s.useState)(!1),[p,h]=(0,s.useState)(""),[m,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{let r=Q.Z.getCurrentUser();if(!r){e.push("/");return}v(r)},[e]);let _=async(r,t)=>{try{let a=await fetch("".concat("http://3.38.186.15:5001","/api/rooms/").concat(r,"/join"),{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":m.token,"x-session-id":m.sessionId},body:JSON.stringify({password:t})});if(!a.ok){let e=await a.json();throw Error(e.message||"채팅방 입장에 실패했습니다.")}e.push("/chat?room=".concat(r))}catch(e){throw console.error("Room join error:",e),e}},w=async t=>{if(t.preventDefault(),!r.name.trim()){h("채팅방 이름을 입력해주세요.");return}if(r.hasPassword&&!r.password){h("비밀번호를 입력해주세요.");return}if(!(null==m?void 0:m.token)){h("인증 정보가 없습니다. 다시 로그인해주세요.");return}try{f(!0),h("");let e=await fetch("".concat("http://3.38.186.15:5001","/api/rooms"),{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":m.token,"x-session-id":m.sessionId},body:JSON.stringify({name:r.name.trim(),password:r.hasPassword?r.password:void 0})});if(!e.ok){let r=await e.json();if(401===e.status)try{await Q.Z.refreshToken();let e=Q.Z.getCurrentUser();if(e)return v(e),w(t)}catch(e){throw Error("인증이 만료되었습니다. 다시 로그인해주세요.")}throw Error(r.message||"채팅방 생성에 실패했습니다.")}let{data:a}=await e.json();await _(a._id,r.hasPassword?r.password:void 0)}catch(r){console.error("Room creation/join error:",r),h(r.message),(r.message.includes("인증")||r.message.includes("만료"))&&(Q.Z.logout(),e.push("/"))}finally{f(!1)}};return(0,a.jsx)("div",{className:"auth-container",children:(0,a.jsxs)(l.Zb.Root,{className:"auth-card",children:[(0,a.jsx)(l.Zb.Header,{children:(0,a.jsx)(c.x,{typography:"heading4",children:"새 채팅방"})}),(0,a.jsxs)(l.Zb.Body,{className:"card-body",children:[p&&(0,a.jsx)(G.xu,{style:{marginBottom:"var(--vapor-space-400)"},children:(0,a.jsx)(d.U,{color:"danger",children:(0,a.jsxs)(G.kC,{align:"center",gap:"200",children:[(0,a.jsx)(i.oC6,{size:16}),(0,a.jsx)(c.x,{children:p})]})})}),(0,a.jsx)("form",{onSubmit:w,children:(0,a.jsxs)(G.Kq,{gap:"300",children:[(0,a.jsxs)(u.oi.Root,{type:"text",value:r.name,onValueChange:e=>t(r=>({...r,name:e})),disabled:n,placeholder:"채팅방 이름을 입력하세요",children:[(0,a.jsx)(u.oi.Label,{children:"채팅방 이름"}),(0,a.jsx)(u.oi.Field,{id:"roomName",name:"name",placeholder:"채팅방 이름을 입력하세요",style:{width:"100%"}})]}),(0,a.jsxs)(K.Root,{checked:r.hasPassword,onCheckedChange:e=>t(r=>({...r,hasPassword:e,password:e?r.password:""})),disabled:n,children:[(0,a.jsx)(K.Label,{children:"비밀번호 설정"}),(0,a.jsx)(K.Control,{})]}),r.hasPassword&&(0,a.jsxs)(u.oi.Root,{type:"password",value:r.password,onValueChange:e=>t(r=>({...r,password:e})),disabled:n,placeholder:"비밀번호를 입력하세요",children:[(0,a.jsx)(u.oi.Label,{children:"비밀번호"}),(0,a.jsx)(u.oi.Field,{id:"roomPassword",name:"password",placeholder:"비밀번호를 입력하세요",style:{width:"100%"}})]}),(0,a.jsx)(Y.z,{type:"submit",color:"primary",size:"lg",stretch:!0,disabled:n||!r.name.trim()||r.hasPassword&&!r.password,children:n?"생성 중...":"채팅방 만들기"})]})})]})]})})}},77507:()=>{},93406:()=>{},74007:()=>{},92890:()=>{},82613:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[834,888,774,179],()=>r(48298)),_N_E=e.O()}]);